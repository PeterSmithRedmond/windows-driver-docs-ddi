---
UID: NS:fltkernel._FLT_CALLBACK_DATA
title: FLT_CALLBACK_DATA (fltkernel.h)
description: The FLT_CALLBACK_DATA structure represents an I/O operation. The Filter Manager and minifilters use this structure to initiate and process I/O operations.
old-location: ifsk\flt_callback_data.htm
tech.root: ifsk
ms.date: 07/29/2022
keywords: ["FLT_CALLBACK_DATA structure"]
ms.keywords: "*PFLT_CALLBACK_DATA, FLT_CALLBACK_DATA, FLT_CALLBACK_DATA structure [Installable File System Drivers], FltSystemStructures_36133023-b06f-46c9-87fc-04543cade79a.xml, PFLT_CALLBACK_DATA, PFLT_CALLBACK_DATA structure pointer [Installable File System Drivers], _FLT_CALLBACK_DATA, fltkernel/FLT_CALLBACK_DATA, fltkernel/PFLT_CALLBACK_DATA, ifsk.flt_callback_data"
req.header: fltkernel.h
req.include-header: Fltkernel.h
req.target-type: Windows
req.target-min-winverclnt: 
req.target-min-winversvr: 
req.kmdf-ver: 
req.umdf-ver: 
req.ddi-compliance: 
req.unicode-ansi: 
req.idl: 
req.max-support: 
req.namespace: 
req.assembly: 
req.type-library: 
req.lib: 
req.dll: 
req.irql: 
targetos: Windows
req.typenames: FLT_CALLBACK_DATA, *PFLT_CALLBACK_DATA
f1_keywords:
 - _FLT_CALLBACK_DATA
 - fltkernel/_FLT_CALLBACK_DATA
 - PFLT_CALLBACK_DATA
 - fltkernel/PFLT_CALLBACK_DATA
 - FLT_CALLBACK_DATA
 - fltkernel/FLT_CALLBACK_DATA
topic_type:
 - APIRef
 - kbSyntax
api_type:
 - HeaderDef
api_location:
 - fltkernel.h
api_name:
 - _FLT_CALLBACK_DATA
 - PFLT_CALLBACK_DATA
 - FLT_CALLBACK_DATA
---

# FLT_CALLBACK_DATA structure

## -description

The **FLT_CALLBACK_DATA** structure represents an I/O operation. The Filter Manager and minifilters use this structure to initiate and process I/O operations.

## -struct-fields

### -field Flags

Bitmask of flags describing the I/O operation.

Minifilters can set the following flag.

| Flag | Meaning |
| ---- | ------- |
| FLTFL_CALLBACK_DATA_DIRTY | A minifilter sets this flag (by calling [**FltSetCallbackDataDirty**](nf-fltkernel-fltsetcallbackdatadirty.md)) to indicate that it has modified the contents of the callback data structure. (For more information, see the following Remarks section.)

> [!NOTE]
> Only the Filter Manager can set the following flags.

When the Filter Manager initializes the callback data structure, it sets one of the following flags to specify the type of I/O operation that the callback data structure represents.

| Flag | Meaning |
| ---- | ------- |
| FLTFL_CALLBACK_DATA_FAST_IO_OPERATION | The callback data structure represents a fast I/O operation. |
| FLTFL_CALLBACK_DATA_FS_FILTER_OPERATION | The callback data structure represents a file system minifilter callback operation. |
| FLTFL_CALLBACK_DATA_IRP_OPERATION | The callback data structure represents an I/O request packet (IRP)-based operation. |

> [!NOTE]
> Only the Filter Manager can set the following flags.

When the Filter Manager initializes the callback data structure, it can also set the following flags.

| Flag | Meaning |
| ---- | ------- |
| FLTFL_CALLBACK_DATA_GENERATED_IO | The callback data structure represents an I/O operation that was generated by a minifilter. This flag is valid only for IRP-based operations. |
| FLTFL_CALLBACK_DATA_REISSUED_IO | The callback data structure represents an I/O operation that is being reissued by a minifilter. (To reissue an I/O operation, a minifilter calls [**FltReissueSynchronousIo**](nf-fltkernel-fltreissuesynchronousio.md).) This flag is valid only for IRP-based operations. |
| FLTFL_CALLBACK_DATA_SYSTEM_BUFFER | The buffer for the I/O operation was allocated from nonpaged pool. This flag can be set for any type of I/O operation. Minifilters must never set this flag. |

> [!NOTE]
> Only the Filter Manager can set the following flags.

When the Filter Manager performs completion processing for the I/O operation that the callback data structure represents, it sets one or both of the following flags.

| Flag | Meaning |
| ---- | ------- |
| FLTFL_CALLBACK_DATA_DRAINING_IO | The Filter Manager sets this flag to indicate that it is currently draining the completion node for the I/O operation. This flag is valid only during I/O completion. |
| FLTFL_CALLBACK_DATA_POST_OPERATION | The Filter Manager sets this flag to indicate that it is currently calling registered post-operation callback ([**PFLT_POST_OPERATION_CALLBACK**](nc-fltkernel-pflt_post_operation_callback.md)) routines for the operation. This flag is valid only during I/O completion. |

### -field Thread

Pointer to the thread that initiated the I/O operation. This field may be NULL.

### -field Iopb

Pointer to an [**FLT_IO_PARAMETER_BLOCK**](ns-fltkernel-_flt_io_parameter_block.md) structure that contains the parameters for the I/O operation.

### -field IoStatus

An [**IO_STATUS_BLOCK**](../wdm/ns-wdm-_io_status_block.md) structure that contains status and information for the I/O operation. A minifilter can modify the contents of this structure only in a pre-operation callback ([**PFLT_PRE_OPERATION_CALLBACK**](nc-fltkernel-pflt_pre_operation_callback.md)) routine from which it is about to return FLT_PREOP_COMPLETE or in a post-operation callback ([**PFLT_POST_OPERATION_CALLBACK**](nc-fltkernel-pflt_post_operation_callback.md)) routine from which it is about to return FLT_POSTOP_FINISHED_PROCESSING. Otherwise, the contents of this structure are normally set by the Filter Manager.

### -field TagData

Pointer to an [**FLT_TAG_DATA_BUFFER**](ns-fltkernel-_flt_tag_data_buffer.md) structure that contains reparse point data for the I/O operation. This pointer is valid only in the post-create path. Thus only a minifilter's post-operation callback routine can change the value of this member. A minifilter's post-create callback routine can change this member to point to a different **FLT_TAG_DATA_BUFFER** structure. However, if it changes the member to point to a different structure, it must first call [**ExFreePool**](../wdm/nf-wdm-exfreepool.md) to free the existing structure to prevent a pool memory leak.

### -field QueueLinks

Queue links that a minifilter can use when the Filter Manager's callback data queue is used to pend the I/O operation.

### -field QueueContext

Array of context information pointers that a minifilter can use when the Filter Manager's queue is used to pend the I/O operation.

### -field FilterContext

Array of context information pointers that a minifilter can use when a queue other than the Filter Manager's queue is used to pend the I/O operation.

### -field RequestorMode

Indicates the execution mode of the process that initiated the I/O operation, either **KernelMode** or **UserMode**.

## -remarks

A minifilter registers pre-operation ([**PFLT_PRE_OPERATION_CALLBACK**](nc-fltkernel-pflt_pre_operation_callback.md)) and post-operation ([**PFLT_POST_OPERATION_CALLBACK**](nc-fltkernel-pflt_post_operation_callback.md)) callback routines for one or more types of I/O operations. When the Filter Manager calls one of these callback routines, it passes a callback data (FLT_CALLBACK_DATA) structure as the first parameter. This structure represents the I/O operation.

A minifilter's pre-operation or post-operation callback routine can modify the contents of the callback data structure, except for the **Thread** and **RequestorMode** members. If it does, it must then call [**FltSetCallbackDataDirty**](nf-fltkernel-fltsetcallbackdatadirty.md), unless it has also modified the contents of the **IoStatus** member. Otherwise, the modified values are ignored.

A minifilter can initiate an I/O operation by calling a support routine such as [**FltReadFile**](nf-fltkernel-fltreadfile.md) or by calling [**FltAllocateCallbackData**](nf-fltkernel-fltallocatecallbackdata.md) to allocate a callback data structure; initializing the structure's I/O parameters, and passing the structure to [**FltPerformSynchronousIo**](nf-fltkernel-fltperformsynchronousio.md) or [**FltPerformAsynchronousIo**](nf-fltkernel-fltperformasynchronousio.md).

A minifilter-initiated I/O operation is sent only to the minifilter instances attached below the calling instance, and to the file system. Minifilters attached above the specified instance do not receive the I/O operation.  

Minifilters can only initiate IRP-based I/O operations. They cannot initiate fast I/O or file system filter (FSFilter) callback operations.

## -see-also

[**FLT_IO_PARAMETER_BLOCK**](ns-fltkernel-_flt_io_parameter_block.md)

[**FLT_IS_FASTIO_OPERATION**](nf-fltkernel-flt_is_fastio_operation.md)

[**FLT_IS_FS_FILTER_OPERATION**](/previous-versions/ff544648(v=vs.85))

[**FLT_IS_IRP_OPERATION**](/previous-versions/ff544654(v=vs.85))

[**FLT_IS_REISSUED_IO**](/previous-versions/ff544660(v=vs.85))

[**FLT_IS_SYSTEM_BUFFER**](/previous-versions/ff544663(v=vs.85))

[**FLT_REGISTRATION**](ns-fltkernel-_flt_registration.md)

[**FLT_RELATED_OBJECTS**](ns-fltkernel-_flt_related_objects.md)

[**FLT_TAG_DATA_BUFFER**](ns-fltkernel-_flt_tag_data_buffer.md)

[**FltAllocateCallbackData**](nf-fltkernel-fltallocatecallbackdata.md)

[**FltFreeCallbackData**](nf-fltkernel-fltfreecallbackdata.md)

[**FltPerformAsynchronousIo**](nf-fltkernel-fltperformasynchronousio.md)

[**FltPerformSynchronousIo**](nf-fltkernel-fltperformsynchronousio.md)

[**FltReadFile**](nf-fltkernel-fltreadfile.md)

[**FltReissueSynchronousIo**](nf-fltkernel-fltreissuesynchronousio.md)

[**FltReuseCallbackData**](nf-fltkernel-fltreusecallbackdata.md)

[**FltSetCallbackDataDirty**](nf-fltkernel-fltsetcallbackdatadirty.md)

[**IO_STACK_LOCATION**](../wdm/ns-wdm-_io_stack_location.md)

[**IO_STATUS_BLOCK**](../wdm/ns-wdm-_io_status_block.md)

[**IRP**](../wdm/ns-wdm-_irp.md)

[**PFLT_POST_OPERATION_CALLBACK**](nc-fltkernel-pflt_post_operation_callback.md)

[**PFLT_PRE_OPERATION_CALLBACK**](nc-fltkernel-pflt_pre_operation_callback.md)
