---
UID: NF:iddcx.IddCxSwapChainReleaseAndAcquireBuffer2
tech.root: display
title: IddCxSwapChainReleaseAndAcquireBuffer2
ms.date: 09/22/2023
targetos: Windows
description: Learn more about the IddCxSwapChainReleaseAndAcquireBuffer2 function.
prerelease: true
req.assembly: 
req.construct-type: function
req.ddi-compliance: 
req.dll: 
req.header: iddcx.h
req.idl: 
req.include-header: 
req.irql: 
req.kmdf-ver: 
req.lib: 
req.max-support: 
req.namespace: 
req.redist: 
req.target-min-winverclnt: Windows 11, version 22H2 September Update (IddCx version 1.10)
req.target-min-winversvr: 
req.target-type: 
req.type-library: 
req.umdf-ver: 
req.unicode-ansi: 
topic_type:
 - apiref
api_type:
 - DllExport
api_location:
 - iddcx.h
api_name:
 - IddCxSwapChainReleaseAndAcquireBuffer2
f1_keywords:
 - IddCxSwapChainReleaseAndAcquireBuffer2
 - iddcx/IddCxSwapChainReleaseAndAcquireBuffer2
dev_langs:
 - c++
helpviewer_keywords:
 - IddCxSwapChainReleaseAndAcquireBuffer2
---

## -description

An indirect display driver calls **IddCxSwapChainReleaseAndAcquireBuffer2** to release the current buffer in the swap chain and acquire a new one. A driver that supports HDR adapters must use **IddCxSwapChainReleaseAndAcquireBuffer2** instead of [**IddCxSwapChainReleaseAndAcquireBuffer**](nf-iddcx-iddcxswapchainreleaseandacquirebuffer.md) and [**IddCxSwapChainReleaseAndAcquireSystemBuffer**](nf-iddcx-iddcxswapchainreleaseandacquiresystembuffer.md).

## -parameters

### -param SwapChainObject

[in] The swap-chain object previously passed by the OS to the driver in a [**EVT_IDD_CX_MONITOR_ASSIGN_SWAPCHAIN**](nc-iddcx-evt_idd_cx_monitor_assign_swapchain.md) call.

### -param pInArgs

[in] Pointer to an [**IDARG_IN_RELEASEANDACQUIREBUFFER2**](ns-iddcx-idarg_in_releaseandacquirebuffer2.md) structure containing the input arguments for the function.

### -param pOutArgs

[out] Pointer to an [**IDARG_OUT_RELEASEANDACQUIREBUFFER2**](ns-iddcx-idarg_out_releaseandacquirebuffer2.md) structure in which the output arguments of the function are returned.

## -returns

**IddCxSwapChainReleaseAndAcquireBuffer2** returns S_OK on success; otherwise it returns an appropriate error code.

## -remarks

The color space of the surface passed in the [**IDDCX_METADATA2**](ns-iddcx-iddcx_metadata2.md) struct is also passed to the driver. This is because it may change on a per frame basis and not match the color space specified when a mode was committed.

Similarly, the pixel format of the provided surface can change on a frame-by-frame basis. For example, if an HDR mode is committed on a path, this does not guarantee that every surface will be an FP16 surface.

The white level for SDR content is also included to be applied to mouse cursors.

If [**IDDCX_METADATA2_VALID_FLAGS_HDR10METADATA**](ne-iddcx-iddcx_metadata2_valid_flags.md) is set in **IDDCX_METADATA2::ValidFlags** then **IDDCX_METADATA2::Hdr10FrameMetaData** contains valid data. This metadata can be one of three types:

* New data that the driver should use.
* An indication that the default metadata previously sent to the driver in a call to [**EVT_IDD_CX_MONITOR_SET_DEFAULT_HDR_METADATA**](nc-iddcx-evt_idd_cx_monitor_set_default_hdr_metadata.md) should be used.
* An indication that whatever metadata was previously sent should be used again. When the type is default or unchanged then the values in [**IDDCX_HDR10_FRAME_METADATA::NewMetaData**](ns-iddcx-iddcx_hdr10_frame_metadata.md) are invalid.

**IddCxSwapChainReleaseAndAcquireBuffer2** also replaces [**IddCxSwapChainReleaseAndAcquireSystemBuffer**](nf-iddcx-iddcxswapchainreleaseandacquiresystembuffer.md). A driver that would have called **IddCxSwapChainReleaseAndAcquireSystemBuffer** can set [**IDARG_IN_RELEASEANDACQUIREBUFFER2::AcquireSystemMemoryBuffer**](ns-iddcx-idarg_in_releaseandacquirebuffer2.md) to indicate it needs [**IDDCX_METADATA2::SystemBufferInfo**](ns-iddcx-iddcx_metadata2.md) filled in.

Version 1.10 drivers that don't report [FP16 support](ne-iddcx-iddcx_adapter_flags.md) can still call this function if it's available in the OS.

For more information about HDR support, see [IddCx version 1.10 updates](/windows-hardware/drivers/display/iddcx1.10-updates).

### Remote HDR metadata

The OS won't pass HDR metadata to remote drivers because the HDR metadata on the client system should be used, not any generated by the server. For remote drivers **IDDCX_METADATA2_VALID_FLAGS_HDR10METADATA** will never be set.

## -see-also

[**IDARG_IN_RELEASEANDACQUIREBUFFER2**](ns-iddcx-idarg_in_releaseandacquirebuffer2.md)

[**IDARG_OUT_RELEASEANDACQUIREBUFFER2**](ns-iddcx-idarg_out_releaseandacquirebuffer2.md)

[**IDDCX_METADATA2**](ns-iddcx-iddcx_metadata2.md)
